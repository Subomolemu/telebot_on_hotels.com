# Telegram-бот для анализа сайта Hotels.com и поиска подходящих пользователю отелей

## Для работы необходимо 

### 1. Установить:
- pyTelegramBotAPI==4.4.1
- python-telegram-bot-calendar==1.0.5
- python-dotenv==0.19.2
- requests~=2.27.1
- telebot~=0.0.4
- loguru~=0.6.0
- urllib3~=1.26.9
- peewee~=3.14.10

### 2. Создать Файл _'.env'_, в котором:
- BOT_TOKEN = "Вставить твой токен бота, полученный от _@BotFather_ в телеграм"
- RAPID_API_KEY = "Вставить ключ с сайта [rapidapi.com](https://rapidapi.com/)"

### 3. Запустить бота командой _'python main.py'_ из терминала, из папки с проектом.

### 4. Найти бота в телеграм, и запустить его командой _'/start'_



#### Используемые API:
- [Telegram bots](https://core.telegram.org/bots)
- [Hotels](https://rapidapi.com/apidojo/api/hotels4)

#### Команды для бота:
- /start - Запустить бота
- /help - Вывести справку
- /lowprice - Узнать топ дешёвых отелей в городе
- /highprice - Узнать топ дорогих отелей в городе
- /bestdeal - Поиск отелей с выбором диапазона цен и удаленности от центра города
- /history - Вывести историю поиска
  - Выводит историю только успешных запросов

### Описание опросов при получении команды:
1. /lowprice:
    - Ввести название города
    - Уточнить район поиска из предложенного списка
    - Выбрать дату въезда и выезда на inline-календаре
    - Указать необходимость вывода фотографии
        - Если ответ да, то сколько фотографий выводить
    - Ждем результат поиска
   

2. /highprice:
    - Ввести название города
    - Уточнить район поиска из предложенного списка
    - Выбрать дату въезда и выезда на inline-календаре
    - Указать необходимость вывода фотографии
        - Если ответ да, то сколько фотографий выводить
    - Ждем результат поиска
   

3. /bestdeal:
    - Ввести название города
    - Уточнить район поиска из предложенного списка
    - Выбрать диапазон цен за сутки в отеле
    - Выбрать диапазон расстояния удаленности отеля от центра
    - Выбрать дату въезда и выезда на inline-календаре
    - Указать необходимость вывода фотографии
        - Если ответ да, то сколько фотографий выводить
    - Ждем результат поиска
            
          Разница между командами /lowprice и /highprice в отправке запроса к апи с сортировкой вывода отелей 
          по возрастанию или убыванию цены за сутки
